@model DemoVolunteer.Models.Post

@{
    var dateValue = Model.AppointmentDate.ToString("yyyy-MM-dd");
    var timeStratValue = Model.TimeStart.ToString("HH:mm");
    var timeEndValue = Model.TimeEnd.ToString("HH:mm");
}



<form method="POST" asp-action="Edit" asp-controller="Post" enctype="multipart/form-data">
    <input type="hidden" asp-for="PostId" value=@Model.PostId/>
    <label for="title" >ชื่อหัวเรือง</label>
    <input asp-for="Title" type="text" name="title" placeholder="title" value=@Model.Title/>

    <label for="CategoryId">เลือกประเภท:</label>
    <select asp-for="CategoryId" name="CategoryId">        
        @foreach (var category in @ViewBag.Categories){
            <option  value="@category.CategoryId">@category.Name</option>
        }
    </select>

    <label for="location">สถาที่นัดหมาย:</label>
    <input asp-for="Location" type="text" name="location" placeholder="location" value=@Model.Location/>

    <label for="category">จำนวนที่รับ:</label>
    <input asp-for="MaxParticipants" type="number" name="MaxParticipants" placeholder="MaxParticipants"  value=@Model.MaxParticipants/>

    <label for="Description">ลายละเอียด:</label>
    <textarea asp-for="Description" placeholder="textarea" value=@Model.Description></textarea>
    <label for="date">วันที่นัด:</label>
    <input asp-for="AppointmentDate" type="date" name="date" placeholder="date" value="@dateValue"/>

    <label for="timestart">เริ่มเวลา:</label>
    <input asp-for="TimeStart" type="time" name="timestart" placeholder="time" value="@timeStratValue"/>

    <label for="timeend">จบที่เวลา:</label>
    <input asp-for="TimeEnd" type="time" name="timeend" placeholder="time"  value="@timeEndValue"/>

    <label for="score">จำนวนชั่วโมง:</label>
    <input asp-for="Score" type="number" name="score" placeholder="score" value=@Model.Score/>

    <hr/>

    <!-- Hidden field สำหรับ ImgURL -->
    <input type="hidden" asp-for="ImgURL" />


    <label for="img">อัปโหลดรูปภาพ:</label>
    <input type="file" id="imageInput" accept="image/*" name="imageFile"/>
    <img id="preview" src=@Model.ImgURL alt="Image Preview" width="500" height="600" style="display: block;">

    <button type="submit">อัพเดท</button>
</form>

<script>
    const imageInput = document.getElementById('imageInput');
    const preview = document.getElementById('preview');

    imageInput.addEventListener('change', function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();

            reader.onload = function (e) {
                preview.src = e.target.result;
                preview.style.display = 'block';
            }

            reader.readAsDataURL(file);
        }
    });
</script>
